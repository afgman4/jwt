# jwt



1. username, password 받아서

2. 정상인지 로그인 시도를 해봄 authenticationManager로 로그인 시도를 하면
   PrincipalDetailsService가 호출되어 loadUserByUsername이 호출됨

3. PrincipalDetails를 세션에 담고(권한 관리를 위해서)

4. jwt 토큰을 만들어서 응답해주면 됨
   PrincipalDetailsService의 loadUserByUsername() 함수가 실행됨
   authentication 객체가 session영역에 저장됨 => 로그인 되었다는 뜻
   
------------------------------[[ 기존 방식 ]]---------------------------------------
유저네임, 패스워드 로그인 정상일 경우
서버쪽에서는 세션id 생성해준다 -> 클라이언트쪽에 쿠키로 세션id를 응답해준다

요청할때마다 쿠키값 세션id를 항상 들고 서버쪽으로 요청하기 때문에 
session.getAttribute("세션값 확인")
서버는 세션id가 유효한지 판단해서 유효하면 인증이 필요한 페이지로 접근하게 하면 된다.
-------------------------------[[ jwt 방식 ]]---------------------------------------
유저네임, 패스워드 로그인이 정상이면 
서버측에서 jwt 토큰을 생성 클라이언트 쪽으로 jwt 토큰을 응답해준다

요청할때마다 jwt 토큰을 가지고 요청하고 서버는 jwt 토큰이 유효한지를 판단함(필터를 만들어야 함)
------------------------------------------------------------------------------------

시큐리티가 filter를 가지고 있는데 그 필터중에 BasicAuthenticationFilter라는 것이 있음
권한이나 인증이 필요한 특정 주소를 요청했을때 위 필터를 무조건 타게 되어 있음.
만약에 권한이나 인증이 필요한 주소가 아니라면 이 필터를 안탐

jwt 토큰을 검증을 해서 정상적인 사용자인지 확인
